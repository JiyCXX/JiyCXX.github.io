<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>MySql 语句 学习笔记</title>
      <link href="/2018/12/11/MySqlStudy/"/>
      <url>/2018/12/11/MySqlStudy/</url>
      
        <content type="html"><![CDATA[<h1 id="MySql-认真学习一下-记录一下学习的语句练习"><a href="#MySql-认真学习一下-记录一下学习的语句练习" class="headerlink" title="MySql 认真学习一下 记录一下学习的语句练习"></a>MySql 认真学习一下 记录一下学习的语句练习</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">DESC departments;</span><br><span class="line"></span><br><span class="line">SELECT * FROM employees </span><br><span class="line">WHERE last_name =<span class="string">&#x27;king&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="单表练习"><a href="#单表练习" class="headerlink" title="单表练习"></a>单表练习</h2><h3 id="查询员工12个月工资总和和奖金-别名annual-aslary"><a href="#查询员工12个月工资总和和奖金-别名annual-aslary" class="headerlink" title="查询员工12个月工资总和和奖金 别名annual aslary"></a>查询员工12个月工资总和和奖金 别名annual aslary</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT employee_id,last_name,salary *12*(1+IFNULL(commission_pct,0)) <span class="string">&quot;annual aslary&quot;</span></span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure><h3 id="查询员工表中去除重复job-id后的数据"><a href="#查询员工表中去除重复job-id后的数据" class="headerlink" title="查询员工表中去除重复job_id后的数据"></a>查询员工表中去除重复job_id后的数据</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT  DISTINCT job_id FROM employees;</span><br></pre></td></tr></table></figure><h3 id="查询工资大于12000员工的名和工资"><a href="#查询工资大于12000员工的名和工资" class="headerlink" title="查询工资大于12000员工的名和工资"></a>查询工资大于12000员工的名和工资</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT last_name, salary FROM employees </span><br><span class="line">WHERE salary &gt;12000;</span><br></pre></td></tr></table></figure><h3 id="查询员工工号为176的姓名和部门号"><a href="#查询员工工号为176的姓名和部门号" class="headerlink" title="查询员工工号为176的姓名和部门号"></a>查询员工工号为176的姓名和部门号</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT last_name,department_id FROM employees</span><br><span class="line">WHERE employee_id =176;</span><br></pre></td></tr></table></figure><h3 id="显示表departments-的结构-并查询其中全部数据"><a href="#显示表departments-的结构-并查询其中全部数据" class="headerlink" title="显示表departments 的结构 并查询其中全部数据"></a>显示表departments 的结构 并查询其中全部数据</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">DESC departments;</span><br><span class="line">SELECT *FROM departments;</span><br></pre></td></tr></table></figure><h3 id="查询员工的姓名部门号-年薪-按年薪降序-姓名升序显示"><a href="#查询员工的姓名部门号-年薪-按年薪降序-姓名升序显示" class="headerlink" title="查询员工的姓名部门号 年薪 按年薪降序 姓名升序显示"></a>查询员工的姓名部门号 年薪 按年薪降序 姓名升序显示</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECTlast_name, department_id, salary * 12 annual_sal</span><br><span class="line">FROM employees</span><br><span class="line">ORDER BY annual_sal DESC ,last_name ASC;</span><br></pre></td></tr></table></figure><h3 id="选择工资不在8000到17000的员工的姓名和工资-按工资排序-显示21到40的数据"><a href="#选择工资不在8000到17000的员工的姓名和工资-按工资排序-显示21到40的数据" class="headerlink" title="选择工资不在8000到17000的员工的姓名和工资 按工资排序 显示21到40的数据"></a>选择工资不在8000到17000的员工的姓名和工资 按工资排序 显示21到40的数据</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT last_name,salary </span><br><span class="line">FROM employees </span><br><span class="line">WHERE salary NOT BETWEEN 8000 AND 17000</span><br><span class="line">ORDER BY salary DESC</span><br><span class="line">LIMIT 20,20;</span><br></pre></td></tr></table></figure><h3 id="查询邮箱中包含e的员工的信息-并先按邮箱的字节数降序-再按部门号升序"><a href="#查询邮箱中包含e的员工的信息-并先按邮箱的字节数降序-再按部门号升序" class="headerlink" title="查询邮箱中包含e的员工的信息 并先按邮箱的字节数降序 再按部门号升序"></a>查询邮箱中包含e的员工的信息 并先按邮箱的字节数降序 再按部门号升序</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT employee_id, last_name,email,department_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE email LIKE <span class="string">&#x27;%e%&#x27;</span></span><br><span class="line">ORDER BY LENGTH(email) DESC, department_id ASC;</span><br></pre></td></tr></table></figure><h2 id="多表练习"><a href="#多表练习" class="headerlink" title="多表练习"></a>多表练习</h2><h3 id="显示所有员工的姓名部门号和部门名称"><a href="#显示所有员工的姓名部门号和部门名称" class="headerlink" title="显示所有员工的姓名部门号和部门名称"></a>显示所有员工的姓名部门号和部门名称</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT e.last_name,e.employee_id, d.department_id, d.department_name</span><br><span class="line">FROM employees e LEFT JOIN departments d</span><br><span class="line">ON e.`department_id`=d.department_id</span><br></pre></td></tr></table></figure><h3 id="查询90号部门员工的job-id-和90号部门的location-id"><a href="#查询90号部门员工的job-id-和90号部门的location-id" class="headerlink" title="查询90号部门员工的job_id 和90号部门的location_id"></a>查询90号部门员工的job_id 和90号部门的location_id</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT e.job_id , d.location_id</span><br><span class="line">FROM employees e JOIN departments d</span><br><span class="line">ON e.`department_id`=d.`department_id`</span><br><span class="line">WHERE d.`department_id`=90;</span><br></pre></td></tr></table></figure><h3 id="查询所有奖金的员工的last-name，-department-name-location-id-city"><a href="#查询所有奖金的员工的last-name，-department-name-location-id-city" class="headerlink" title="查询所有奖金的员工的last_name， department_name location_id city"></a>查询所有奖金的员工的last_name， department_name location_id city</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT e.last_name ,e.`commission_pct`, d.department_name , d.location_id , l.city</span><br><span class="line">FROM employees e LEFT JOIN departments d</span><br><span class="line">ON e.`department_id`=d.`department_id`</span><br><span class="line">LEFT JOIN locations l</span><br><span class="line">ON d.`location_id`=l.`location_id`</span><br><span class="line">WHERE e.`commission_pct` IS NOT NULL;</span><br></pre></td></tr></table></figure><h3 id="选择city-在toronto工作的员工的last-name-job-id-department-id-department-name"><a href="#选择city-在toronto工作的员工的last-name-job-id-department-id-department-name" class="headerlink" title="选择city 在toronto工作的员工的last_name job_id department_id department_name"></a>选择city 在toronto工作的员工的last_name job_id department_id department_name</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT e.last_name,e.job_id,e.department_id,d.department_name,l.`city`</span><br><span class="line">FROM employees e JOIN departments d</span><br><span class="line">ON e.`department_id`=d.`department_id`</span><br><span class="line">JOIN locations l</span><br><span class="line">ON d.`location_id`=l.`location_id`</span><br><span class="line">WHERE l.`city`=<span class="string">&#x27;toronto&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="查询员工所在的部门名称-部门地址-姓名工作工资-其中员工所在的部门的部门名称为Executive"><a href="#查询员工所在的部门名称-部门地址-姓名工作工资-其中员工所在的部门的部门名称为Executive" class="headerlink" title="查询员工所在的部门名称 部门地址 姓名工作工资 其中员工所在的部门的部门名称为Executive"></a>查询员工所在的部门名称 部门地址 姓名工作工资 其中员工所在的部门的部门名称为Executive</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT d.department_name,l.street_address,e.last_name,e.job_id,e.salary</span><br><span class="line">FROM employees e JOIN departments d</span><br><span class="line">ON e.`department_id`=d.`department_id`</span><br><span class="line">JOIN locations l</span><br><span class="line">ON d.`location_id`=l.`location_id`</span><br><span class="line">WHERE d.`department_name` = <span class="string">&#x27;Executive&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="选择指定员工的姓名-员工号-以及他的管理的姓名-员工号"><a href="#选择指定员工的姓名-员工号-以及他的管理的姓名-员工号" class="headerlink" title="选择指定员工的姓名 员工号 以及他的管理的姓名 员工号"></a>选择指定员工的姓名 员工号 以及他的管理的姓名 员工号</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT emp.last_name <span class="string">&quot;employee&quot;</span>, emp.employee_id <span class="string">&quot;Emp#&quot;</span>,mgr.last_name <span class="string">&quot;manager&quot;</span>,mgr.employee_id <span class="string">&quot;Mgr#&quot;</span></span><br><span class="line">FROM employees emp LEFT JOIN employees mgr</span><br><span class="line">ON emp.manager_id =mgr.employee_id;</span><br></pre></td></tr></table></figure><h3 id="查询那些员工没有部门"><a href="#查询那些员工没有部门" class="headerlink" title="查询那些员工没有部门"></a>查询那些员工没有部门</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT e.`employee_id`,d.`department_id`,d.`department_name`</span><br><span class="line">FROM  departments d LEFT JOIN  employees e </span><br><span class="line">ON e.`department_id`=d.`department_id`</span><br><span class="line">WHERE e.`department_id` IS NULL;</span><br></pre></td></tr></table></figure><h3 id="查询那个城市没有部门"><a href="#查询那个城市没有部门" class="headerlink" title="查询那个城市没有部门"></a>查询那个城市没有部门</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT l.location_id, l.city,d.`department_id`</span><br><span class="line">FROM locations l LEFT JOIN departments d</span><br><span class="line">ON l.`location_id`=d.`location_id`</span><br><span class="line">WHERE d.`department_id` IS NULL;</span><br></pre></td></tr></table></figure><h3 id="查询部门名为sales或-it-的员工的信息"><a href="#查询部门名为sales或-it-的员工的信息" class="headerlink" title="查询部门名为sales或 it 的员工的信息"></a>查询部门名为sales或 it 的员工的信息</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT e.`employee_id`,e.last_name,e.`department_id`,d.`department_name`</span><br><span class="line">FROM departments d JOIN employees e</span><br><span class="line">ON d.`department_id`=e.`department_id`</span><br><span class="line">WHERE d.`department_name` IN(<span class="string">&#x27;sales&#x27;</span>,<span class="string">&#x27;it&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="查看表结构"><a href="#查看表结构" class="headerlink" title="查看表结构"></a>查看表结构</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DESC locations;</span><br><span class="line">`employees`</span><br><span class="line">DESC departments;</span><br></pre></td></tr></table></figure><h3 id="面试-分数降序"><a href="#面试-分数降序" class="headerlink" title="面试 分数降序"></a>面试 分数降序</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT salary </span><br><span class="line">FROM employees </span><br><span class="line">WHERE salary &gt;6000</span><br><span class="line">ORDER BY salary DESC;</span><br></pre></td></tr></table></figure><h3 id="平均分"><a href="#平均分" class="headerlink" title="平均分"></a>平均分</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT AVG(salary)</span><br><span class="line">FROM employees</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/*</span><br><span class="line">学生表 S(学号 S<span class="comment">#,姓名 Sn,所在系 SD,年龄 SA)</span></span><br><span class="line">课程表 C(课程号 C<span class="comment">#,课程名称 CN，先修课号 PC#)</span></span><br><span class="line">学生选课表 SC(学号 S<span class="comment">#，课程号 C#,成绩G)</span></span><br><span class="line">问题一：画出该数据库系统的实体联系图（E-R图），注明联系类型</span><br><span class="line">问题二：列出选课超过3门的学生学号，其所选课程数量及平均成绩</span><br><span class="line">*/</span><br><span class="line">SELECT CONNECTION_ID()</span><br><span class="line">FROM DUAL</span><br></pre></td></tr></table></figure><h3 id="显示系统的时间"><a href="#显示系统的时间" class="headerlink" title="显示系统的时间"></a>显示系统的时间</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT CURDATE(),CURTIME(),SYSDATE() ,NOW(),LOCALTIME();</span><br><span class="line">FROM DUAL;</span><br></pre></td></tr></table></figure><h3 id="查询员工工号-姓名-工资以及工资提高百分比20后的结果"><a href="#查询员工工号-姓名-工资以及工资提高百分比20后的结果" class="headerlink" title="查询员工工号 姓名 工资以及工资提高百分比20后的结果"></a>查询员工工号 姓名 工资以及工资提高百分比20后的结果</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT employee_id, last_name, salary, salary*(1+0.2)<span class="string">&quot;new salary&quot;</span></span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure><h3 id="将员工的姓名按首字母排序-并写出姓名长度"><a href="#将员工的姓名按首字母排序-并写出姓名长度" class="headerlink" title="将员工的姓名按首字母排序 并写出姓名长度"></a>将员工的姓名按首字母排序 并写出姓名长度</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT last_name,LENGTH(last_name)</span><br><span class="line">FROM employees</span><br><span class="line">ORDER BY last_name ASC;</span><br></pre></td></tr></table></figure><h3 id="查询员工的id-last-name-salary-作为一列输出-别名为out-put"><a href="#查询员工的id-last-name-salary-作为一列输出-别名为out-put" class="headerlink" title="查询员工的id last_name salary 作为一列输出 别名为out_put"></a>查询员工的id last_name salary 作为一列输出 别名为out_put</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT CONCAT (employee_id ,<span class="string">&#x27;  &#x27;</span>,last_name,<span class="string">&#x27;  &#x27;</span>, salary)<span class="string">&quot;OUT_PUT&quot;</span></span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure><h3 id="查询公司各员工工作的年数，工作的天数，按工作年数降序"><a href="#查询公司各员工工作的年数，工作的天数，按工作年数降序" class="headerlink" title="查询公司各员工工作的年数，工作的天数，按工作年数降序"></a>查询公司各员工工作的年数，工作的天数，按工作年数降序</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT employee_id,ROUND(DATEDIFF(NOW(),hire_date)/365) <span class="string">&quot;worked_years&quot;</span>,DATEDIFF(NOW(),hire_date)<span class="string">&quot;worked_days&quot;</span></span><br><span class="line">FROM employees</span><br><span class="line">ORDER BY worked_years DESC;</span><br></pre></td></tr></table></figure><h3 id="查询员工姓名-hire-date-department-id-满足一下条件"><a href="#查询员工姓名-hire-date-department-id-满足一下条件" class="headerlink" title="查询员工姓名 hire date department id 满足一下条件"></a>查询员工姓名 hire date department id 满足一下条件</h3><h3 id="雇佣时间在97年之后-id-为80-或90或110-commission-pct不为空"><a href="#雇佣时间在97年之后-id-为80-或90或110-commission-pct不为空" class="headerlink" title="雇佣时间在97年之后 id 为80 或90或110 commission_pct不为空"></a>雇佣时间在97年之后 id 为80 或90或110 commission_pct不为空</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT last_name,hire_date,department_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id IN(80,90,110)</span><br><span class="line">AND commission_pct IS NOT NULL</span><br><span class="line"><span class="comment">#and hire_date &gt;=&#x27;1997-01-01&#x27;;隐式转换</span></span><br><span class="line"><span class="comment">#显示转换</span></span><br><span class="line">AND hire_date &gt;= STR_TO_DATE(<span class="string">&#x27;1997-01-01&#x27;</span>,<span class="string">&#x27;%Y-%m-%d&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="查询公司中入职超过一万天的员工的姓名-入职时间"><a href="#查询公司中入职超过一万天的员工的姓名-入职时间" class="headerlink" title="查询公司中入职超过一万天的员工的姓名 入职时间"></a>查询公司中入职超过一万天的员工的姓名 入职时间</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT last_name,hire_date</span><br><span class="line">FROM employees</span><br><span class="line">WHERE DATEDIFF(CURDATE(),hire_date) &gt;=10000;</span><br></pre></td></tr></table></figure><h3 id="输出指定结果"><a href="#输出指定结果" class="headerlink" title="输出指定结果"></a>输出指定结果</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT CONCAT(last_name,<span class="string">&#x27; earns &#x27;</span>,salary,<span class="string">&#x27; monthly but wants &#x27;</span>,salary*3 )<span class="string">&quot;dream salary&quot;</span></span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure><h3 id="使用case-when"><a href="#使用case-when" class="headerlink" title="使用case when"></a>使用case when</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT last_name <span class="string">&quot;Last_name&quot;</span>,job_id <span class="string">&quot;Job_id&quot;</span>,CASE job_id WHEN <span class="string">&#x27;AD_PRES&#x27;</span> THEN <span class="string">&#x27;A&#x27;</span></span><br><span class="line">                                                         WHEN <span class="string">&#x27;ST_MAN&#x27;</span> THEN <span class="string">&#x27;B&#x27;</span></span><br><span class="line">                                                         WHEN <span class="string">&#x27;IT_PROG&#x27;</span> THEN <span class="string">&#x27;C&#x27;</span></span><br><span class="line">                                                         WHEN <span class="string">&#x27;SA_REP&#x27;</span> THEN <span class="string">&#x27;D&#x27;</span></span><br><span class="line">                                                         WHEN <span class="string">&#x27;ST_CLERK&#x27;</span> THEN <span class="string">&#x27;E&#x27;</span> </span><br><span class="line">                                                         ELSE <span class="string">&#x27;undefined&#x27;</span> END <span class="string">&quot;Grade&quot;</span></span><br><span class="line">FROM employees;</span><br></pre></td></tr></table></figure><h2 id="多行-聚合函数"><a href="#多行-聚合函数" class="headerlink" title="多行  聚合函数"></a>多行  聚合函数</h2><h3 id="查询各个部门的平均工资-最高工资"><a href="#查询各个部门的平均工资-最高工资" class="headerlink" title="查询各个部门的平均工资 最高工资"></a>查询各个部门的平均工资 最高工资</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT department_id, AVG(salary),SUM(salary),MAX(salary)</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id;</span><br><span class="line"></span><br><span class="line">SELECT salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id =20;</span><br></pre></td></tr></table></figure><h3 id="查询每个工种的平均工资"><a href="#查询每个工种的平均工资" class="headerlink" title="查询每个工种的平均工资"></a>查询每个工种的平均工资</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT AVG(salary)</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY job_id</span><br></pre></td></tr></table></figure><h3 id="查询各个job-id的员工工资的最大值-最小值-平均值-总和"><a href="#查询各个job-id的员工工资的最大值-最小值-平均值-总和" class="headerlink" title="查询各个job_id的员工工资的最大值 最小值 平均值 总和"></a>查询各个job_id的员工工资的最大值 最小值 平均值 总和</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT job_id ,MAX(salary) sala_max,MIN(salary) sala_min, AVG(salary) sala_avg, SUM(salary) sala_sum</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY job_id;</span><br></pre></td></tr></table></figure><h3 id="选着具有各个job-id的员工的人数"><a href="#选着具有各个job-id的员工的人数" class="headerlink" title="选着具有各个job_id的员工的人数"></a>选着具有各个job_id的员工的人数</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT job_id,COUNT(*)</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY job_id;</span><br></pre></td></tr></table></figure><h3 id="查询员工工资最高工资和最低工资的差距"><a href="#查询员工工资最高工资和最低工资的差距" class="headerlink" title="查询员工工资最高工资和最低工资的差距"></a>查询员工工资最高工资和最低工资的差距</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT MAX(salary)-MIN(salary) <span class="string">&quot;diffrence&quot;</span></span><br><span class="line">FROM employees</span><br></pre></td></tr></table></figure><h3 id="查询各个管理者手下员工的最低工资-其中最低工资不能低于6000没有管理者不计算在内"><a href="#查询各个管理者手下员工的最低工资-其中最低工资不能低于6000没有管理者不计算在内" class="headerlink" title="查询各个管理者手下员工的最低工资 其中最低工资不能低于6000没有管理者不计算在内"></a>查询各个管理者手下员工的最低工资 其中最低工资不能低于6000没有管理者不计算在内</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT manager_id,MIN(salary) sala_min</span><br><span class="line">FROM employees</span><br><span class="line">WHERE manager_id IS NOT NULL</span><br><span class="line">GROUP BY manager_id</span><br><span class="line">HAVING sala_min &gt;=6000;</span><br></pre></td></tr></table></figure><h3 id="查询所有部门的名字-location-id-员工数量和平均工资-并按平均工资降序"><a href="#查询所有部门的名字-location-id-员工数量和平均工资-并按平均工资降序" class="headerlink" title="查询所有部门的名字 location_id 员工数量和平均工资 并按平均工资降序"></a>查询所有部门的名字 location_id 员工数量和平均工资 并按平均工资降序</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT  d.department_name, d.location_id,COUNT(employee_id), AVG(e.salary) <span class="string">&quot;sala_avg&quot;</span></span><br><span class="line">FROM departments d LEFT JOIN employees e</span><br><span class="line">ON d.`department_id`=e.`department_id`</span><br><span class="line">GROUP BY d.department_name, d.location_id</span><br><span class="line">ORDER BY sala_avg DESC;</span><br></pre></td></tr></table></figure><h3 id="查询每个工种-每个部门的部门名-工种名和最低工资"><a href="#查询每个工种-每个部门的部门名-工种名和最低工资" class="headerlink" title="查询每个工种 每个部门的部门名 工种名和最低工资"></a>查询每个工种 每个部门的部门名 工种名和最低工资</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT  d.department_name, e.job_id,MIN(e.salary)</span><br><span class="line">FROM departments d LEFT JOIN employees e</span><br><span class="line">ON d.`department_id`=e.`department_id`</span><br><span class="line">GROUP BY d.department_name, e.job_id;</span><br></pre></td></tr></table></figure><h3 id="查询和-zlotkey相同部门的员工的姓名和工资"><a href="#查询和-zlotkey相同部门的员工的姓名和工资" class="headerlink" title="查询和 zlotkey相同部门的员工的姓名和工资"></a>查询和 zlotkey相同部门的员工的姓名和工资</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT last_name,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id =( SELECT department_id</span><br><span class="line">       FROM employees</span><br><span class="line">       WHERE last_name =<span class="string">&#x27;Zlotkey&#x27;</span>                </span><br><span class="line">                     );</span><br></pre></td></tr></table></figure><h3 id="查询工资比公司平均工资高的员工的工号-姓名和工资"><a href="#查询工资比公司平均工资高的员工的工号-姓名和工资" class="headerlink" title="查询工资比公司平均工资高的员工的工号 姓名和工资"></a>查询工资比公司平均工资高的员工的工号 姓名和工资</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT employee_id,last_name,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary &gt; (SELECT AVG(salary)</span><br><span class="line">FROM employees</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="选着工资大于所有JOB-ID-’SA-MAN’的员工的工资的员工的姓名-job-id-salary"><a href="#选着工资大于所有JOB-ID-’SA-MAN’的员工的工资的员工的姓名-job-id-salary" class="headerlink" title="选着工资大于所有JOB_ID=’SA_MAN’的员工的工资的员工的姓名 job_id salary"></a>选着工资大于所有JOB_ID=’SA_MAN’的员工的工资的员工的姓名 job_id salary</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT last_name,job_id,salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary &gt; ALL(</span><br><span class="line">SELECT salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE job_id=<span class="string">&#x27;SA_MAN&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="查询-和姓名中包含字母u的员工在相同部门的-员工的工号和姓名"><a href="#查询-和姓名中包含字母u的员工在相同部门的-员工的工号和姓名" class="headerlink" title="查询  和姓名中包含字母u的员工在相同部门的   员工的工号和姓名"></a>查询  和姓名中包含字母u的员工在相同部门的   员工的工号和姓名</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT employee_id, last_name</span><br><span class="line">FROM employees e</span><br><span class="line">WHERE department_id IN (</span><br><span class="line">SELECT DISTINCT department_id</span><br><span class="line">FROM employees </span><br><span class="line">WHERE last_name LIKE <span class="string">&#x27;%u%&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="查询在部门location-id为1700的部门工作的员工的员工号"><a href="#查询在部门location-id为1700的部门工作的员工的员工号" class="headerlink" title="查询在部门location_id为1700的部门工作的员工的员工号"></a>查询在部门location_id为1700的部门工作的员工的员工号</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT employee_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE department_id IN(</span><br><span class="line">SELECT department_id</span><br><span class="line">FROM departments</span><br><span class="line">WHERE location_id =1700</span><br><span class="line">   );</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line"><span class="comment">### 查询管理者是King的员工的 工资 姓名</span></span><br><span class="line">``` bash</span><br><span class="line">SELECT last_name,salary,manager_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE manager_id IN (</span><br><span class="line">SELECT employee_id</span><br><span class="line">FROM employees</span><br><span class="line">WHERE last_name =<span class="string">&#x27;King&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="查询工资最低的员工的信息"><a href="#查询工资最低的员工的信息" class="headerlink" title="查询工资最低的员工的信息"></a>查询工资最低的员工的信息</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">SELECT last_name, salary</span><br><span class="line">FROM employees</span><br><span class="line">WHERE salary &lt;=(</span><br><span class="line">SELECT MIN(salary)</span><br><span class="line">FROM employees</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="查询平均工资最低的部门信息"><a href="#查询平均工资最低的部门信息" class="headerlink" title="查询平均工资最低的部门信息"></a>查询平均工资最低的部门信息</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#方式一</span></span><br><span class="line">SELECT *</span><br><span class="line">FROM departments</span><br><span class="line">WHERE department_id = (</span><br><span class="line">SELECT department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">HAVING AVG(salary)=(</span><br><span class="line">SELECT MIN(avg_salary) </span><br><span class="line">FROM (</span><br><span class="line">SELECT AVG(salary)<span class="string">&quot;avg_salary&quot;</span></span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">)t_dept_avg_sala</span><br><span class="line">    )</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">#方式二</span></span><br><span class="line">SELECT *</span><br><span class="line">FROM departments</span><br><span class="line">WHERE department_id = (</span><br><span class="line">SELECT department_id</span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">HAVING AVG(salary)&lt;= ALL(</span><br><span class="line">SELECT AVG(salary)<span class="string">&quot;avg_salary&quot;</span></span><br><span class="line">FROM employees</span><br><span class="line">GROUP BY department_id</span><br><span class="line">)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">#方式三</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> MySql </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>主题切换为butterfly</title>
      <link href="/2018/10/22/10.22/"/>
      <url>/2018/10/22/10.22/</url>
      
        <content type="html"><![CDATA[<pre><code>上一个主题式 fluid 感觉不是很酷炫,这次换个butterfly 试试看,效果还是不错的</code></pre>]]></content>
      
      
      <categories>
          
          <category> 主题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 主题 </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>入秋了</title>
      <link href="/2018/10/12/10.18/"/>
      <url>/2018/10/12/10.18/</url>
      
        <content type="html"><![CDATA[<h1 id="日常杂谈"><a href="#日常杂谈" class="headerlink" title="日常杂谈"></a>日常杂谈</h1><p>深圳这天气,夏天实在太长了!最近这几个星期随着台风到来,感觉也算入秋了,长裤穿起来!</p>]]></content>
      
      
      <categories>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日常 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2018/05/01/hello-world/"/>
      <url>/2018/05/01/hello-world/</url>
      
        <content type="html"><![CDATA[<p>欢迎来到我的博客,这是我的第一篇博客,hexok 和butterfly搭建的.</p><h2 id="Quick-Start-语句使用"><a href="#Quick-Start-语句使用" class="headerlink" title="Quick Start 语句使用"></a>Quick Start 语句使用</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
